<!DOCTYPE html>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />
<title>Image-1</title>

<script type="text/javascript" charset="utf-8" src="js/main.js"></script>
<link href="css/global.css" rel="stylesheet" type="text/css" />
<link href="css/print.css" rel="stylesheet" type="text/css" />
<link rel="shortcut icon" type="image/x-icon" href="favicon.ico">
<link href="css/responsive.css" rel="stylesheet" type="text/css">
<script src="js/jquery.min.js"></script>
<script src="js/app.datePicker.js"></script>
<!--<script src="js/jquery.mobile-1.3.2.min.js"></script>-->
<script type="text/javascript" src="js/db.js"></script>


<script type="text/javascript">


$(document).ready(function(){



//document.getElementById('mother_name').value=localStorage.getItem('mother_name');
//document.getElementById('baby_name').value=localStorage.getItem('baby_name');

	$(".genders").click(function(){
		$(".genders").each(function(){
			$(this).removeClass('unknown');
		});
		$(this).attr('class','unknown genders');
	});

	$(".duedates").click(function(){
		$(".duedates").each(function(){
			$(this).removeClass('unknown');
		});
		$(this).attr('class','unknown duedates');
	});

	$(".units").click(function(){
		if($(this).attr('alt') == 'kg')
		{
			$("#weight_lb").hide();
			$("#weight_kg").show();
		}
		else
		{
			$("#weight_kg").hide();
			$("#weight_lb").show();
		}
		$(".units").each(function(){
			$(this).removeClass('unknown');
		});
		$(this).attr('class','unknown units');
	});
});

document.addEventListener("deviceready", onDeviceReady, false);

var db;
db =getDatabase();

function getDatabase()
{
	
	return window.openDatabase("pregnancy","1.0","myTodo Database",200000);
}

function onDeviceReady() {
        db =getDatabase();
		//alert("onDeviceReady IN");
		db.transaction(function (tx) {
		tx.executeSql('CREATE TABLE IF NOT EXISTS personalize ( id INTEGER PRIMARY KEY AUTOINCREMENT, mother_name,baby_name,gender,due_date,units,weightlb,heightft,heightinches,weightkg,heightcm)');
		}
		, databaseError, getItems);
		//alert("onDeviceReady OUT");
}


function getItems()
{
	console.log("Entering get Items..!!");
	db.transaction(function (tx) {
		tx.executeSql('SELECT * FROM personalize',[],querySuccess);
		}, databaseError);
	console.log("Leaving get Items..!!");
}

function querySuccess(tx,results)
{
	console.log("Entering querySuccess");
	var len = results.rows.length;
	var output = '';
	if(len > 0)
	{
	document.getElementById("count").value='1';
	}
	else
	{
	document.getElementById("count").value='0';
	}
	
document.getElementById("mother_name").value=results.rows.item(0).mother_name;
document.getElementById("baby_name").value=results.rows.item(0).baby_name;
document.getElementById("gender").value=results.rows.item(0).gender;
var a=document.getElementById("gender").value;

document.getElementById("due_date").value=results.rows.item(0).due_date;
document.getElementById("units").value=results.rows.item(0).units;
document.getElementById("weightlb").value=results.rows.item(0).weightlb;
document.getElementById("heightft").value=results.rows.item(0).heightft;
document.getElementById("heightinches").value=results.rows.item(0).heightinches;
document.getElementById("weightkg").value=results.rows.item(0).weightkg;
document.getElementById("heightcm").value=results.rows.item(0).heightcm;	

	
	/*	for(var i=0; i < len ; i++)
	{
		output = output + '<li id="' + results.rows.item(i).id + '">' + results.rows.item(i).mother_name + '</li>';
	} */
	//alert(output+"OUTPUT");
}

function insertItem()
{
	console.log("Entering insertItem");
var mother_name = document.getElementById("mother_name").value;
var baby_name = document.getElementById("baby_name").value;
var gender = document.getElementById("gender").value;
var due_date = document.getElementById("due_date").value;
var units = document.getElementById("units").value;

var weightlb = document.getElementById("weightlb").value;
var weightunit = "pounds";
var heightft = document.getElementById("heightft").value;
var heightinches = document.getElementById("heightinches").value;

var weightkg = document.getElementById("weightkg").value;
var weightunit = "kg";
//var heightcm = document.getElementById("heightcm").value;
var heightcm = document.getElementById("heightcm").value;
	
	db.transaction(function (tx) {
		tx.executeSql('INSERT INTO personalize(mother_name,baby_name,gender,due_date,units,weightlb,heightft,heightinches,weightkg,heightcm) VALUES("'+ mother_name+'","'+ baby_name+'","'+ gender+'","'+due_date+'","'+units+'","'+weightlb+'","'+heightft+'","'+heightinches+'","'+weightkg+'","'+heightcm+'")');
		console.log('INSERT INTO personalize(mother_name,,baby_name,gender,due_date,units,weightlb,heightft,heightinches,weightkg,heightcm) VALUES("'+ mother_name+'","'+ baby_name+'","'+ gender+'","'+due_date+'","'+units+'","'+weightlb+'","'+heightft+'","'+heightinches+'","'+weightkg+'","'+heightcm+'")');
		}, databaseError);
		//alert("insertItem OUT");

}   

function updateItem()
{
	console.log("Entering updateItem");
var mother_name = document.getElementById("mother_name").value;
var baby_name = document.getElementById("baby_name").value;
var gender = document.getElementById("gender").value;
var due_date = document.getElementById("due_date").value;
var units = document.getElementById("units").value;

var weightlb = document.getElementById("weightlb").value;
var weightunit = "pounds";
var heightft = document.getElementById("heightft").value;
var heightinches = document.getElementById("heightinches").value;

var weightkg = document.getElementById("weightkg").value;
var weightunit = "kg";
//var heightcm = document.getElementById("heightcm").value;
var heightcm = document.getElementById("heightcm").value;
	
	db.transaction(function (tx) {
		tx.executeSql('UPDATE personalize SET mother_name="'+ mother_name+'",baby_name="'+ baby_name+'",gender="'+ gender+'",due_date="'+due_date+'",units="'+units+'",weightlb="'+weightlb+'",heightft="'+heightft+'",heightinches="'+heightinches+'",weightkg="'+weightkg+'",heightcm="'+heightcm+'"');
		//console.log('UPDATE personalize SET mother_name="'+ mother_name+'",baby_name="'+ baby_name+'",gender="'+ gender+'",due_date="'+due_date+'",units="'+units+'",weightlb="'+weightlb+'",heightft="'+heightft+'",heightinches="'+heightinches+'",weightkg="'+weightkg+'",heightcm="'+heightcm+'"');
		//window.location="index.html";
		}, databaseError);
		console.log("updateItem OUT");

}

function databaseError(error)
{
	alert("DATABASE Error:"+ error.code);
	
}

   
$(document).ready(function(){
	

});

function save_data()
{
	console.log("Got Tasks..!!");
getItems();
if(document.getElementById("count").value == '0')
{
insertItem();
}
else
{
updateItem();
}
setTimeout(function(){
window.location="index.html";
}, 200);

}


function set_date1()
{
// defining options
alert("ALL");
}


</script>


</head>
<body onload="onDeviceReady();">
<div id="wrapper">
  <div id="header">
    <div class="container">
      <ul class="reset">
        <li><a href="#">Reset</a></li>
        <li><a href="#" class="hold">Personalize</a></li>
        <li class="last-child"><a onclick="save_data();">Done</a></li>
      </ul>
      <div class="clear"></div>
    </div>
  </div>
  <div id="container">
    <div class="container">
      <h1>Personalize my application:</h1>
      <form action="" method="POST">
        <ul class="reset">
          <li>
            <label>Mother's Name:</label>
            <div class="fieldlft">
			<input type="hidden" name="count" id="count">
              <input class="input" name="mother_name" id="mother_name"type="text">
            </div>
          </li>
          
          <li>
            <label>Baby's Name:</label>
            <div class="fieldlft">
              <input class="input input-2" name="baby_name" id="baby_name" type="text">
            </div>
          </li>
          
          <li>
            <label>Gender:</label>
            <div class="fieldlft"> 
			<!--<input type="radio" name="gender" id="gender" value="Unknown">Unknown
			<input type="radio" name="gender" id="gender" value="Male">Male
			<input type="radio" name="gender" id="gender" value="Female">Female-->
			
			<span class="btn"> 
			<input type="hidden" name="gender" id="gender" value="Unknown">
	<a href="javascript:void(0);" id="gender1" onclick="document.getElementById('gender').value='Unknown';" alt="Unknown" class="unknown genders">Unknown</a> 
	<a href="javascript:void(0);"  id="gender2" onclick="document.getElementById('gender').value='Female';" alt="Female"class="genders">Female</a>
	<a href="javascript:void(0);" id="gender3" onclick="document.getElementById('gender').value='Male';" alt="Male" class="genders">Male</a></span>
			</div>
          </li>
        </ul>

        
        <ul class="reset due-date">
          <li>Due date type:</li>
  
		  <li><span class="btn btn2">
		  <input type="hidden" name="due_date" id="due_date" value="Not Pregnant">
	<a href="javascript:void(0);" onclick="document.getElementById('due_date').value='Not Pregnant';" class="unknown duedates">Not Pregnant</a> 
	<a href="javascript:void(0);" onclick="document.getElementById('due_date').value='LMP';" class="side-line duedates">LMP </a>
	<a href="javascript:void(0);" onclick="document.getElementById('due_date').value='Due Date';" class="duedates">Due date</a></span></li>
		  <input type="hidden" name="set_date" id="set_date">
			<div id="advanceddemo" data-role="page" data-add-back-btn="true" class="ui-body-b" style="position:fixed;min-height:0px;">
                <input class="mobipick-mm-dd-yyyy" type="text" />
		</div>	  
          <li class="rightAlign"><a href="" onclick="set_date1();">Set Date</a></li>
		  
        </ul>
        <div class="clear"></div>
        
        
        <h2>Mother's Pre-pregnancy info:</h2>
        <ul class="reset" id="weight_lb">
          <li>
            <label class="width100">Weight:</label>
            <div class="fieldlft">
              <input class="input width140" name="weightlb" id="weightlb" type="text">
            </div>
            <div class="text">pounds</div>
          </li>
          <li class="leftAlign">
            <label class="width100">Height:</label>
            <div class="fieldlft">
              <input class="input width140" name="heightft" id="heightft" type="text">
            </div>
            <div class="text text-margin">ft</div>
            <div class="fieldlft">
              <input class="input width140" name="heightinches" id="heightinches" type="text">
            </div>
            <div class="text">inches</div>
          </li>
        </ul>
		<ul class="reset" id="weight_kg" style="display:none;">
          <li>
            <label class="width100">Weight:</label>
            <div class="fieldlft">
              <input class="input width140" name="weightkg" id="weightkg" type="text">
            </div>
            <div class="text">kg</div>
          </li>
          <li class="leftAlign">
            <label class="width100">Height:</label>
            <div class="fieldlft">
              <input class="input width140" name="heightcm" id="heightcm" type="text">
            </div>
            <div class="text text-margin">cm</div>
          </li>
        </ul>
        <div class="clear"></div>
        
        <ul class="reset">
            <li class="first-child">
                <label class="width160">Weight units:</label>
                <div class="fieldlft"> <span class="btn width291"> 
				<input type="hidden" name="units" id="units">
			<a href="javascript:void(0);" onclick="document.getElementById('units').value='lb';" alt="lb" class="unknown lb units">lb</a> 
			<a href="javascript:void(0);" onclick="document.getElementById('units').value='kg';" class="units" alt="kg">kg</a></span></div>
              </li>   
		</ul>        
      </form>
    </div>
  </div>
  <div class="clear"></div>
  <div id="footer">
  		<div class="container">
  			<ul class="reset">
            	<li><a href="index.html"><img src="images/home.jpg"></a></li>
                <li><a href="my_baby.html"><img src="images/my-baby.jpg"></a></li>
                <li><a href="trackers.html"><img src="images/trackers.jpg"></a></li>
                <li><a href="take_photo.html"><img src="images/photo.jpg"></a></li>
                <li><a href="personalize.html"><img src="images/personalize.jpg"></a></li>
            </ul>
          <div class="clear"></div>
  		</div>
  </div>
</div>
</body>
</html>
